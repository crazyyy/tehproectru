"use strict";!function(){function e(e,r,t,o,n){function u(){p.form.query=p.exampleQuery}function s(e){p.progress=parseInt(e)+"%"}function a(){p.processing=!0;var e=0;i&&t.cancel(i),i=t(function(){s(++e),100===e&&(e=1)},200),r.post(window.routs.api.kadastr_num,{num:p.form.query}).success(function(e){return e.features&&e.features[0]?(p.result=e.features[0].attributes,o.$broadcast("searchQuery",{url:"http://maps.rosreestr.ru/PortalOnline/?l=8&mls=map|anno&cls=cadastre&cn="+p.form.query,result:p.result}),p.processing=!1,s(0),void(i&&t.cancel(i))):p.err="Введите корректный номер участка"}),p.form.query&&(parent.history.pushState("","","?"+p.form.query),$("input#query11").val("http://kadastrmap.ru/?"+p.form.query))}function c(e){p.show_help_icon=e?!0:!p.show_help_icon,p.show_help_icon&&(l&&n.cancel(l),l=n(function(){p.show_help_icon=!1},3e3))}var i,l,p=this;p.exampleQuery="77:02:0016009:32",p.form={},p.setExample=u,p.submit=a,p.toggleShowHelp=c}angular.module("app").controller("Search",e),e.$inject=["$log","$http","$interval","$rootScope","$timeout"],submit()}();